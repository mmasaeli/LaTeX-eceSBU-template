% در این فایل، دستورها و تنظیمات مورد نیاز، آورده شده است.
%-------------------------------------------------------------------------------------------------------------------
\usepackage{pdfpages}
\usepackage[width=\linewidth,labelfont={small,bf,it},textfont={footnotesize,it}]{caption}
\usepackage[caption=false,font=footnotesize]{subfig}
\usepackage{verbatim}
\usepackage{amssymb,amsmath,amsthm}
%ایجاد فرورفتگی در اولین پاراگراف هر بخش
\usepackage{indentfirst}
%ایجاد فرورفتگی در اولین پاراگراف‌ها
\setlength{\parindent}{0.5cm}
% بسته‌ای برای تنطیم حاشیه‌های بالا، پایین، چپ و راست صفحه
\usepackage[top=30mm, bottom=30mm, left=30mm, right=30mm, headsep=0.5cm]{geometry}
% بسته‌‌ای برای ظاهر شدن شکل‌ها و تصاویر متن
\usepackage{graphicx}
\graphicspath{{./figs/}}
% بسته‌ای برای رسم کادر
\usepackage{framed} 
% بسته‌‌ای برای چاپ شدن خودکار تعداد صفحات در صفحه «معرفی پایان‌نامه» (در صورت استفاده)
\usepackage{lastpage}
% بسته‌‌هاایی برای ایجاد دیاگرام‌های مختلف
\usepackage{etoolbox}
\usepackage{pgfplots}
\usepackage{tikz}
\usepackage{tikzscale}
\usetikzlibrary{patterns}
\pgfplotsset{compat=1.9}

% بسته‌ و دستوراتی برای ایجاد لینک‌های رنگی با امکان جهش
\usepackage[linktocpage=true,colorlinks,pagebackref=true,linkcolor=blue,citecolor=magenta]{hyperref}
% چنانچه قصد پرینت گرفتن نوشته خود را دارید، خط بالا را غیرفعال و  از دستور زیر استفاده کنید چون در صورت استفاده از دستور زیر‌‌، 
% لینک‌ها به رنگ سیاه ظاهر خواهند شد که برای پرینت گرفتن، مناسب‌تر است
%\usepackage[pagebackref=false]{hyperref}
%بسته‌ی لازم برای مراجع در صورت به کار بردن natbib
%\usepackage[nonamebreak,square]{natbib}
%\usepackage[nonamebreak,square,numbers]{natbib}
%و اگرنه:
\usepackage{cite}

\usepackage{zref-perpage}
\zmakeperpage{footnote}
% بسته‌ لازم برای تنظیم سربرگ‌ها
\usepackage{fancyhdr}
% دستورات مربوط به ایجاد نمایه
\usepackage{makeidx}
\makeindex
%%%%%%%%%%%%%%%%%%%%%%%%%%
% فراخوانی بسته زی‌پرشین و تعریف قلم فارسی و انگلیسی
\usepackage{xepersian}
%\usepackage{bidiftnxtra}
\settextfont[Scale=1]{XB Niloofar}
%\setiranicfont[Scale=1]{PersianModern-Oblique}
%\setiranicfont[Scale=1]{B Nazanin}
\setlatintextfont[Scale=0.9]{FreeSans}
% چنانچه می‌خواهید اعداد در فرمول‌ها، انگلیسی باشد، خط زیر را غیرفعال کنید
%\setdigitfont{Yas}
\setdigitfont[Scale=.85]{Persian Modern}
%\setdigitfont[Scale=1.1]{XB Niloofar}
%\KashidaOn
%تنظیم فاصله‌ی خطوط و پاراگراف‌ها
\linespread{1.3}
\setlength{\parskip}{1ex plus 0.5ex minus 0.2ex}
%%%%%%%%%%%%%%%%%%%%%%%%%%
% تعریف قلم‌های فارسی و انگلیسی اضافی برای استفاده در بعضی از قسمت‌های متن
\defpersianfont\nastaliq[Scale=2]{IranNastaliq}
\defpersianfont\chapternumber[Scale=2]{IranNastaliq}
\defpersianfont\titr[Scale=1.8]{XB Niloofar}
\defpersianfont\dav[Scale=2.2]{B Davat}
%%%%%%%%%%%%%%%%%%%%%%%%%%
% دستوری برای حذف کلمه «چکیده»
\renewcommand{\abstractname}{}
% دستوری برای حذف کلمه «abstract»
\renewcommand{\latinabstract}{}
% دستوری برای تغییر نام کلمه «اثبات» به «برهان»
\renewcommand\proofname{\textbf{برهان}}
% دستوری برای تغییر نام کلمه «کتاب‌نامه» به «مراجع»
\renewcommand{\bibname}{مراجع}
%استفاده از کلمه‌ی نمودار به جای شکل
%\renewcommand{\figurename}{نمودار}
% دستوری برای تعریف واژه‌نامه انگلیسی به فارسی
\newcommand\persiangloss[2]{#1\dotfill\lr{#2}\\}
% دستوری برای تعریف واژه‌نامه فارسی به انگلیسی 
\newcommand\englishgloss[2]{#2\dotfill\lr{#1}\\}
%%%%%%%%%%%%%%%%%%%%%%%%%%
% تعریف و نحوه ظاهر شدن عنوان قضیه‌ها، تعریف‌ها، مثال‌ها و ...
\theoremstyle{definition}
\newtheorem{definition}{تعریف}[section]
%\newtheorem{deduct}[definition]{}
\newtheorem{theorem}[definition]{قضیه}
\newtheorem{lemma}[definition]{لم}
\newtheorem{proposition}[definition]{گزاره}
\newtheorem{corollary}[definition]{نتیجه}
\newtheorem{remark}[definition]{ملاحظه}
\newtheorem{example}[definition]{مثال}
%%%%%%%%%%%%%%%%%%%%%%%%%%
% تعریف دستورات جدید برای خلاصه نویسی و راحتی کار در هنگام تایپ فرمول‌های ریاضی
\newcommand{\mA}{\mathcal{A}}% مجموعه‌ی عامل‌ها
\newcommand{\mB}{\mathcal{B}}% زیرمجموعه‌ای از عامل‌ها
\newcommand{\mL}{\mathcal{L}}% زبان
\newcommand{\mF}{\mathcal{F}}% سیگما جبر
\newcommand{\mP}{\mathcal{P}}% تخصیص احتمالاتی
\newcommand{\mK}{\mathcal{K}}% منطق K
\newcommand{\mS}{\mathcal{S}}% منطق S5
\newcommand{\mbbP}{\mathbb{P}}% مجموعه‌ی گزاره‌های اتمی
\newcommand{\mbbQ}{\mathbb{Q}}% مجموعه‌ی اعداد گویا
\newcommand{\mbbM}{\mathbb{M}}% مجموعه‌ی مدل‌های شناختی احتمالاتی
\newcommand{\mbbK}{\mathbb{K}}% کلاس مدل‌های کریپکی
\newcommand{\mbbS}{\mathbb{S}}% کلاس مدل‌های شناختی
\newcommand{\mbP}{\mathbf{P}}% نماد تابعی احتمالاتی
\newcommand{\xra}{\xrightarrow}
\newcommand{\scr}{\scriptscriptstyle}
\newcommand{\bp}{\begin{proof}}
\newcommand{\ep}{\end{proof}}
%\newcommand{\close}{\begin{latin}\noindent $\square$ \end{latin}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%تعریف اعداد لاتین برای زمانی که از اعداد فارسی در متن استفاده می‌کنیم
\def\0{\textrm{\lr{0}}}
\def\1{\textrm{\lr{1}}}
\def\2{\textrm{\lr{2}}}
\def\3{\textrm{\lr{3}}}
\def\4{\textrm{\lr{4}}}
\def\5{\textrm{\lr{5}}}
\def\6{\textrm{\lr{6}}}
\def\7{\textrm{\lr{7}}}
\def\8{\textrm{\lr{8}}}
\def\9{\textrm{\lr{9}}}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% براساس نسخه‌های از ۱.۲.۵ به بعد بسته‌ی bidi در توابع زیر باید توجه داشت:
% که l یعنی شروع نوشتار از ابتدای خط یا جعبه،
% و r یعنی شروع نوشتار از انتهای خط یا جعبه، 
% و s یعنی شروع نوشتار از وسط خط یا جعبه.
\newdimen\xleftright
\xleftright=\textwidth
\advance \xleftright by -10.5cm
\newcommand{\leftright}[3]{%
\noindent
\makebox[4 cm][r]{#1}
\makebox[\xleftright][s]{}
\makebox[5.5 cm][l]{#2}
\makebox[1 cm][l]{#3}%
}
\newcommand{\leftrightb}[2]{%
\noindent
\makebox[4 cm][r]{#1}
\makebox[\xleftright][s]{}
\makebox[6.5 cm][l]{#2}%
}
\newcommand{\semanticsa}[2]{%
\noindent
\makebox[4.3 cm][r]{#1}
\makebox[\xleftright][c]{اگر و فقط اگر}
\makebox[6.2 cm][l]{#2}%
}
\newcommand{\semanticsb}[2]{%
\noindent
\makebox[3.5 cm][l]{#1}
\makebox[\xleftright][c]{اگر و فقط اگر}
\makebox[7 cm][r]{#2}%
}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% دستورهایی برای سفارشی کردن سربرگ صفحات
\csname@onesidetrue\endcsname
\fancypagestyle{main}{
\fancyhf{} 
\fancyhead[L]{\thepage}
}
\fancypagestyle{other}{
\fancyhf{} 
\fancyfoot[C]{\thepage}
}
% اگر می‌خواهید خط افقی بالای صفحه از بین برود:
\renewcommand{\headrulewidth}{0pt}
\appto\frontmatter{\pagestyle{other}}
\appto\mainmatter{\pagestyle{main}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% دستورهایی برای سفارشی کردن صفحات اول فصل‌ها
\makeatletter
\newcommand\mycustomraggedright{%
 \if@RTL\raggedleft%
 \else\raggedright%
 \fi}
\def\@part[#1]#2{%
\ifnum \c@secnumdepth >-2\relax
\refstepcounter{part}%
\addcontentsline{toc}{part}{\thepart\hspace{1em}#1}%
\else
\addcontentsline{toc}{part}{#1}%
\fi
\markboth{}{}%
{\centering
\interlinepenalty \@M
\ifnum \c@secnumdepth >-2\relax
 \huge\bfseries \partname\nobreakspace\thepart
\par
%\vskip 20\p@
\fi
\Huge\bfseries #2\par}%
\@endpart}
\def\@makechapterhead#1{%
\vspace*{280\p@}%
{\parindent \z@ \mycustomraggedright %\@mycustomfont
\ifnum \c@secnumdepth >\m@ne
\if@mainmatter
\renewcommand{\thechapter}{\nastaliq\tartibi{chapter}}
%\centering
\hspace{2cm}\nastaliq \bfseries \@chapapp\space {\chapternumber\thechapter}
\par\nobreak
%\vskip 20\p@
\fi
\fi
\centering
\interlinepenalty\@M 
\thispagestyle{empty}
\titr \bfseries #1\par\clearpage
}}

 \def\abj@num@i#1{%
   \ifcase#1\or الف\or ب\or ج\or د%
            \or ه‍\or و\or ز\or ح\or ط\fi
   \ifnum#1=\z@\abjad@zero\fi}
   
\renewcommand*{\thesubfigure}{\harfi{subfigure}} 
\providecommand\thefigsubsep{.}
\def\p@subfigure{\@nameuse{thefigure}\thefigsubsep}
\makeatother
%دستور عددگذاری صحیح معادله‌ها
\renewcommand*{\theequation}{\arabic{equation}-\thechapter}
%دستور عددگذاری صحیح شماره الگوریتم‌ها (در صورت استفاده
%\renewcommand*{\thealgorithm}{(\arabic{algorithm}-\thechapter)}
%دستور برای این که نام فهرست شکل‌ها به درستی ظاهر شود.
\renewcommand\listfigurename{فهرست شکل‌ها}
